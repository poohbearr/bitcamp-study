<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <h1>연락처</h1>
    <a href="form.html">새 연락처</a>
    <table id="x-contact-Table" border="1">
      <thead>
        <tr>
          <th>이름</th>
          <th>이메일</th>
          <th>전화</th>
          <th>회사</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
    </table>

<script type="text/javascript">
  var tbody = document.querySelector("#x-contact-Table tbody")

  fetch("/contact/list")
  .then(function(response) {
    return response.json()
  })
  .then(function(contacts) {
    console.log(contacts);
    for (var contact of contacts) {
      var values = contact.split(",")
      var tr = document.createElement("tr")
      tr.innerHTML = `<td><a href="/contact/view.html?email=${values[1]}">${values[0]}</td>
      <td>${values[1]}</td>
      <td>${values[2]}</td>
      <td>${values[3]}</td>`
      tbody.appendChild(tr)
      console.log(tr)
  }

})
</script>
  </body>
</html>
